# ============================================================================
# Rust Formatting Configuration for BDP Project
# ============================================================================
# This file configures rustfmt behavior for consistent code formatting across
# the entire workspace. Run with: cargo fmt --all
#
# Documentation: https://rust-lang.github.io/rustfmt/

# ============================================================================
# Edition Configuration
# ============================================================================
edition = "2021"

# ============================================================================
# Line Width and Wrapping
# ============================================================================
# Maximum width for each line
max_width = 100

# Hard tabs or spaces
hard_tabs = false
tab_spaces = 4

# ============================================================================
# Import Organization
# ============================================================================
# How imports should be grouped
imports_granularity = "Crate"
group_imports = "StdExternalCrate"

# Layout for imports
imports_layout = "HorizontalVertical"

# Reorder imports alphabetically
reorder_imports = true

# Reorder modules declarations
reorder_modules = true

# ============================================================================
# Function Parameters
# ============================================================================
# Maximum width for function parameters
fn_params_layout = "Tall"

# Maximum width for function signature
fn_call_width = 80

# ============================================================================
# Formatting Options
# ============================================================================
# Use field init shorthand if possible (e.g., `Foo { x }` instead of `Foo { x: x }`)
use_field_init_shorthand = true

# Use try shorthand (`?` instead of `try!`)
use_try_shorthand = true

# Force multiline in `impl` blocks
force_multiline_blocks = false

# ============================================================================
# Comments and Documentation
# ============================================================================
# Format code in documentation comments
format_code_in_doc_comments = true

# Normalize comments style
normalize_comments = true

# Wrap comments at max_width
wrap_comments = true

# Convert `/* */` comments to `//` where possible
normalize_doc_attributes = true

# ============================================================================
# Macro Formatting
# ============================================================================
# Format macro bodies
format_macro_bodies = true

# Format macro matchers
format_macro_matchers = true

# ============================================================================
# Trailing Commas
# ============================================================================
# Add trailing commas for vertical layouts
trailing_comma = "Vertical"

# Trailing commas in match arms
match_block_trailing_comma = true

# ============================================================================
# Struct and Enum Formatting
# ============================================================================
# Where to put a binary operator when a binary expression goes multiline
binop_separator = "Front"

# Combine control expressions with their block
control_brace_style = "AlwaysSameLine"

# Brace style for items (functions, structs, etc.)
brace_style = "SameLineWhere"

# Where to put the where clause
where_single_line = false

# ============================================================================
# Blank Lines
# ============================================================================
# Blank lines between items
blank_lines_upper_bound = 1
blank_lines_lower_bound = 0

# ============================================================================
# String Formatting
# ============================================================================
# Format string literals where necessary
format_strings = true

# ============================================================================
# Chain Formatting
# ============================================================================
# Indentation of chain of method calls
chain_width = 60
chains_overflow_last = true

# ============================================================================
# Array and Slice Formatting
# ============================================================================
# Array width
array_width = 80

# ============================================================================
# Misc Options
# ============================================================================
# Merge multiple imports from the same crate into a single use statement
merge_imports = true

# Combine multiple derives into a single `#[derive(...)]`
merge_derives = true

# Use small heuristics to improve formatting
use_small_heuristics = "Default"

# Unstable features (requires nightly)
# Uncomment if using nightly Rust
# unstable_features = true
# format_macro_matchers = true
# overflow_delimited_expr = true
